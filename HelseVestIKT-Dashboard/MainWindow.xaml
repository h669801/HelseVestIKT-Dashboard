<Window x:Class="HelseVestIKT_Dashboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wfi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
		 xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        Title="Helse Vest IKT" Height="800" Width="1300"
		WindowState="Maximized"
		Topmost="True">

	<Window.Resources> 

		<FontFamily x:Key="SourceSansFont">Source Sans Pro</FontFamily>


		<Style x:Key="SquareRoundedButtonStyle" TargetType="Button">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border"
                CornerRadius="8" 
							Background="{TemplateBinding Background}"
                BorderBrush="{TemplateBinding BorderBrush}"
                BorderThickness="{TemplateBinding BorderThickness}">
							<ContentPresenter HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            RecognizesAccessKey="True" Margin="10,0,10,0"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
			<Setter Property="MinHeight" Value="30"/>
			<Setter Property="Padding" Value="10,4"/>
			<Setter Property="Background" Value="White"/>
			<Setter Property="BorderBrush" Value="#003087"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Foreground" Value="#003087"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#EFEFEF"/>
				</Trigger>
				<Trigger Property="IsPressed" Value="True">
					<Setter Property="Background" Value="#DDDDDD"/>
				</Trigger>
			</Style.Triggers>
		</Style>


		<!-- Transparent knapp for ItemsControl (brukes til spillkort), men fortsatt avrundet -->
		<Style x:Key="TransparentButtonStyle" TargetType="Button" BasedOn="{StaticResource SquareRoundedButtonStyle}">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderBrush" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="0"/>
		</Style>

		<!-- Knapp for 'View Property' / CTA-knapper -->
		<Style x:Key="ViewPropertyButtonStyle" TargetType="Button" BasedOn="{StaticResource SquareRoundedButtonStyle}">
			<Setter Property="Background" Value="#007ACC"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Padding" Value="5,2"/>
			<Setter Property="Margin" Value="0,5,0,0"/>
			<Setter Property="BorderBrush" Value="#007ACC"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Style.Triggers>
				<Trigger Property="IsMouseOver" Value="True">
					<Setter Property="Background" Value="#005A99"/>
				</Trigger>
			</Style.Triggers>
		</Style>

		<!-- Stil for tekstboksen (Søk...) -->
		<Style TargetType="TextBox" x:Key="SearchBoxStyle">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Margin" Value="10"/>
			<Setter Property="VerticalAlignment" Value="Top"/>
			<Setter Property="Height" Value="30"/>
		</Style>

		<!-- Updated TextBlock style with a unique key -->
		<Style x:Key="SourceSansTextBlockStyle" TargetType="TextBlock">
			<Setter Property="FontFamily" Value="{StaticResource SourceSansFont}"/>
			<Setter Property="FontSize" Value="16"/>
			<Setter Property="Foreground" Value="#003087"/>
		</Style>

       <!-- Test Style for checkbox -->
		<Style TargetType="CheckBox">
			<Setter Property="Template">
				<Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal">
                            <Border x:Name="border"
                    Width="24"
                    Height="24"
                    CornerRadius="6"
                    Background="White"
                    BorderThickness="2"
                    BorderBrush="Gray">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="5" ShadowDepth="2" Opacity="0.3"/>
                                </Border.Effect>
                                <Grid>
                                    <Rectangle x:Name="checkBackground"
                               Fill="White"
                               RadiusX="6" RadiusY="6"/>
                                    <Path x:Name="checkMark"
                          Data="M4,12 L10,18 L20,6"
                          Stroke="Black"
                          StrokeThickness="2"
                          Visibility="Collapsed"/>
                                </Grid>
                            </Border>
                            <ContentPresenter Margin="8,0,0,0" VerticalAlignment="Center"/>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <!-- Når CheckBox er sjekket -->
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="checkBackground" Property="Fill" Value="LightGray"/>
                                <Setter TargetName="checkMark" Property="Visibility" Value="Visible"/>
                            </Trigger>

                            <!-- Når musen er over CheckBox -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#EFEFEF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="#003087"/>
                            </Trigger>

                            <!-- Når CheckBox er deaktivert -->
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.5"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

		<!-- Base-stil for CheckBox med avrundede hjørner -->
		 <Style x:Key="RoundedCheckBoxStyle" TargetType="CheckBox">
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="CheckBox">
						<StackPanel Orientation="Horizontal">
							<Border x:Name="CheckBoxBorder" Width="16" Height="16"
                                    CornerRadius="4"
                                    Background="White"
                                    BorderBrush="Gray"
                                    BorderThickness="1"
                                    VerticalAlignment="Center">
								<Path x:Name="CheckMark"
                                      Data="M2,8 L6,12 L14,4"
                                      Stroke="Black"
                                      StrokeThickness="2"
                                      Visibility="Collapsed"/>
							</Border>
							<ContentPresenter VerticalAlignment="Center" Margin="5,0,0,0"/>
						</StackPanel>
						<ControlTemplate.Triggers>
							<Trigger Property="IsChecked" Value="True">
								<Setter TargetName="CheckBoxBorder" Property="Background" Value="LightBlue"/>
								<Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
							</Trigger>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="DarkGray"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<!-- Stil for CheckBox som bruker SourceSansFont -->
		<Style x:Key="RoundedCheckBoxWithSourceSansFontStyle" TargetType="CheckBox" BasedOn="{StaticResource RoundedCheckBoxStyle}">
			<Setter Property="FontFamily" Value="{StaticResource SourceSansFont}"/>
			<Setter Property="Foreground" Value="#003087"/>
		</Style>
		
	</Window.Resources>

	<Grid Background="#F6F6F6">
		<Grid.RowDefinitions>
			<!-- Rad 0: Toppmeny -->
			<RowDefinition Height="Auto"/>
			<!-- Spiller nå / Status / Knapper -->
			<RowDefinition Height="Auto"/>
			<!-- Rad 1: Innhold -->
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<!-- TOPPMENY / HEADER -->
		<Border x:Name="ToolbarGrid" Grid.Row="0" Background="White" BorderThickness="0,0,0,1" BorderBrush="#DDD">
			<Border.Effect>
				<DropShadowEffect BlurRadius="4"
								  ShadowDepth="3"
								  Direction="270"
								  Color="Black"
								  Opacity="0.9"/>
			</Border.Effect>

			<Grid x:Name="HeaderGrid" Height="100">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>

				<!-- Venstre del: pilleformet knapp for VR-kalibrering -->
				<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">

					<!-- VENSTRE SEKSJON: VR-headset og kontrollerstatus -->
					<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">

						<!-- Headset -->
						<StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="10,10">
							<Border x:Name="HeadsetStatusBorder" BorderThickness="5" CornerRadius="25"
                                Width="60" Height="60">
								<Border.Style>
									<Style TargetType="Border">
										<Setter Property="BorderBrush" Value="Red"/>
										<Style.Triggers>
											<!-- Rød kant hvis ikke tilkoblet -->
											<DataTrigger Binding="{Binding VREquipmentStatus.IsHeadsetConnected}" Value="True">
												<Setter Property="BorderBrush" Value="Green"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</Border.Style>
								<!-- Knapp for Headset -->
								<Button x:Name="HeadsetButton"
                                    Style="{StaticResource SquareRoundedButtonStyle}"
                                    Background="Transparent" BorderThickness="0"
                                    Width="50" Height="32" Margin="0,0">
									<Image Source="Bilder/vr_headset.png" Width="32" Height="32"/>
								</Button>
							</Border>
							
							<!-- Viser batteriprosent -->
							<TextBlock 
									   HorizontalAlignment="Center" FontSize="12" Margin="0,5">
								<TextBlock.Style>
									<Style TargetType="TextBlock" BasedOn="{StaticResource SourceSansTextBlockStyle}">
										<Setter Property="Text" 
												Value="{Binding VREquipmentStatus.HeadsetBatteryPercentage, StringFormat={}{0:F0}%}"/>
										<Style.Triggers>
											<!-- Dersom headset ikk er koblet til "Ikke tilkoblet" -->
											<DataTrigger Binding="{Binding VREquipmentStatus.IsHeadsetConnected}" Value="False">
												<Setter Property="Text" Value="Ikke tilkoblet"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
						</StackPanel>

						<!-- Venstre kontroller -->
						<StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="10,10">
							<Border x:Name="LeftControllerStatusBorder" BorderThickness="5" CornerRadius="25"
                                Width="60" Height="60">
								<Border.Style>
									<Style TargetType="Border">
										<Setter Property="BorderBrush" Value="Red"/>
										<Style.Triggers>
											<DataTrigger Binding="{Binding VREquipmentStatus.IsLeftControllerConnected}" Value="True">
												<Setter Property="BorderBrush" Value="Green"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</Border.Style>
								<Button x:Name="LeftControllerButton"
                                    Style="{StaticResource SquareRoundedButtonStyle}"
                                    Background="Transparent" BorderThickness="0"
                                    Width="50" Height="32" Margin="0,0">
									<Image Source="Bilder/kontroller_venstre.png" Width="31" Height="31"/>
								</Button>
							</Border>
							
							<!-- Viser batteriprosent/status -->
							<!-- Viser batteriprosent -->
							<TextBlock 
								   HorizontalAlignment="Center" FontSize="12" Margin="0,5">
								<TextBlock.Style>
									<Style TargetType="TextBlock" BasedOn="{StaticResource SourceSansTextBlockStyle}">
										<Setter Property="Text" 
											Value="{Binding VREquipmentStatus.LeftControllerBatteryPercentage, StringFormat={}{0:F0}%}"/>
										<Style.Triggers>
											<!-- Dersom headset ikk er koblet til "Ikke tilkoblet" -->
											<DataTrigger Binding="{Binding VREquipmentStatus.IsLeftControllerConnected}" Value="False">
												<Setter Property="Text" Value="Ikke tilkoblet"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
						</StackPanel>

						<!-- Høyre kontroller -->
						<StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="10,10">
							<Border x:Name="RightControllerStatusBorder" BorderThickness="5" CornerRadius="25"
                                Width="60" Height="60">
								<Border.Style>
									<Style TargetType="Border">
										<Setter Property="BorderBrush" Value="Red"/>
										<Style.Triggers>
											<DataTrigger Binding="{Binding VREquipmentStatus.IsRightControllerConnected}" Value="True">
												<Setter Property="BorderBrush" Value="Green"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</Border.Style>
								<Button x:Name="RightControllerButton" 
                                    Style="{StaticResource SquareRoundedButtonStyle}"
                                    Background="Transparent" BorderThickness="0"
                                    Width="50" Height="32" Margin="0,0">
									<Image Source="Bilder/kontroller.png" Width="31" Height="31"/>
								</Button>
							</Border>
							
							<!-- Viser batteriprosent -->
							<TextBlock 
								   HorizontalAlignment="Center" FontSize="12" Margin="0,5">
								<TextBlock.Style>
									<Style TargetType="TextBlock" BasedOn="{StaticResource SourceSansTextBlockStyle}">
										<Setter Property="Text" 
											Value="{Binding VREquipmentStatus.RightControllerBatteryPercentage, StringFormat={}{0:F0}%}"/>
										<Style.Triggers>
											<!-- Dersom headset ikk er koblet til "Ikke tilkoblet" -->
											<DataTrigger Binding="{Binding VREquipmentStatus.IsRightControllerConnected}" Value="False">
												<Setter Property="Text" Value="Ikke tilkoblet"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
						</StackPanel>
					</StackPanel>

					<Button x:Name="KalibrerKnapp" Style="{StaticResource SquareRoundedButtonStyle}" Click="KalibreringKnapp_Click" Height="45" Margin="10,0,0,15">
						<StackPanel Orientation="Horizontal">
							<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Kalibrering av VR" Margin="5,7,0,0"/>
							<Image Source="/Bilder/accessibility.png" Width="30" Height="30" HorizontalAlignment="Right" Margin="10,0,0,0" />
						</StackPanel>
					</Button>

					<Button x:Name="VisKnapp" Style="{StaticResource SquareRoundedButtonStyle}" Height="45" Margin="10,0,0,15" Visibility="Collapsed" Click="VisKnapp_Click">
						<StackPanel>
							<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Vis sidemeny"/>
						</StackPanel>
					</Button>
				</StackPanel>


				<!-- Midtstilt logo/tekst -->
				<StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
					<Grid Width="60" Height="60" Margin="15,0">
						<!-- 3 rader og 3 kolonner -->
						<Grid.RowDefinitions>
							<RowDefinition/>
							<RowDefinition/>
							<RowDefinition/>
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition/>
							<ColumnDefinition/>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<!-- Lyse blå sirkel i midten -->
						<Ellipse Grid.Row="1" Grid.Column="1"
             Fill="#6CACE4"
             Width="13" Height="13"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
			Margin="3"
			/>

						<!-- Lysere blå sirkel øverst -->
						<Ellipse Grid.Row="0" Grid.Column="1"
             Fill="#6CACE4"
             Width="13" Height="13"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
			Margin="3"/>

						<!-- Lysere blå sirkel til venstre -->
						<Ellipse Grid.Row="1" Grid.Column="0" 
             Fill="#003087"
             Width="13" Height="13"
             HorizontalAlignment="Center"
             VerticalAlignment="Center" 
								 Margin="3"/>

						<!-- Lysere blå sirkel til høyre -->
						<Ellipse Grid.Row="1" Grid.Column="2"
             Fill="#6CACE4"
             Width="13" Height="13"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
								 Margin="3"/>

						<!-- Lysere blå sirkel nederst -->
						<Ellipse Grid.Row="2" Grid.Column="1"
             Fill="#6CACE4"
             Width="13" Height="13"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
								 Margin="3"/>
					</Grid>
					<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="HELSE" 
                      FontSize="24"
                     VerticalAlignment="Center" 
                     Margin="0,0"/>
					<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="VEST" 
					  FontSize="24"
					FontWeight="Bold"
					 VerticalAlignment="Center" 
					 Margin="10,0"/>
				</StackPanel>

				<!-- Høyre del: wifi, volum, klokke, avslutt-knapp (alle pilleformet) -->
				<StackPanel Grid.Column="3" Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0,10,0">
					<!-- Klokke -->
					<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="{Binding CurrentTime}" VerticalAlignment="Center" FontSize="24" FontWeight="SemiBold" Margin="10,0"/>
					
					<!-- Volumknapp -->
					<Button Style="{StaticResource SquareRoundedButtonStyle}" BorderThickness="0" x:Name="SpeakerButton"
MouseEnter="SpeakerButton_MouseEnter" MouseLeave="SpeakerButton_MouseLeave">
						<StackPanel Orientation="Horizontal">
							<Image Source="Bilder/speaker_popup.png" Width="24" Height="24"/>
						</StackPanel>
					</Button>

					<!-- Wifi signal-->
					<StackPanel Orientation="Horizontal" Height="24" Width="24" Margin="0,0,10,0">
						<Image x:Name="WifiSignalIcon" Width="20" Height="20" Margin="0,0,10,0" SnapsToDevicePixels="True" UseLayoutRounding="True" RenderOptions.BitmapScalingMode="HighQuality"/>
					</StackPanel>
					<!-- Popup for volum -->
					<Popup x:Name="VolumePopup" Placement="Custom"
                 CustomPopupPlacementCallback="VolumePopupPlacementCallback"
                 PlacementTarget="{Binding ElementName=SpeakerButton}"
                 AllowsTransparency="True" 
                 MouseEnter="VolumePopup_MouseEnter" MouseLeave="VolumePopup_MouseLeave">
						<Border CornerRadius="8" Background="White" BorderBrush="Gray" BorderThickness="1" Padding="5">
							<StackPanel>
								<Slider x:Name="VolumeSlider" Width="100" Minimum="0" Maximum="100" Value="50"
                        ToolTip="Juster volum" ValueChanged="VolumeSlider_ValueChanged"/>
								<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" x:Name="VolumeStatusTextBlock" Text="50%" HorizontalAlignment="Center" Margin="5,5,0,0"/>
							</StackPanel>
						</Border>
					</Popup>

					<!-- Fullskjerm knapp -->
					<Button x:Name="FullScreenButton" Style="{StaticResource SquareRoundedButtonStyle}" Width="42" Height="40" Click="FullScreenButton_Click">
						<Image Source="/Bilder/fullskjerm.png" Width="21" Height="24"/>
					</Button>
					<!-- Avslutt-knapp -->
					<Button Style="{StaticResource SquareRoundedButtonStyle}" Width="42" Height="40" Click="ExitButton_Click" Margin="10,0">
						<Image Source="/Bilder/exit_knapp.png" Width="21" Height="24" />
					</Button>
				</StackPanel>
			</Grid>
		</Border>

		<!-- Status, Spiller nå, knapper -->

		<Grid x:Name="StatusBar" Grid.Row="1" Height="50" Background="White" Visibility="Visible" >
			<Grid.Effect>
				<DropShadowEffect BlurRadius="6"
								  ShadowDepth="2"
								  Direction="270"
								  Color="Black"
								  Opacity="0.9"/>

			</Grid.Effect>

			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!--Spiller nå-->
			<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Grid.Column="0" Text="Spiller nå:" VerticalAlignment="Center" Margin="10,0"/>
			<TextBox Grid.Column="1" x:Name="CurrentGameTextBlock" Background="Salmon" IsHitTestVisible="false" Text="{Binding CurrentPlayer}" VerticalAlignment="Center" Width="Auto"/>

			<!--Status-->
			<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Grid.Column="2" Text="Status:" VerticalAlignment="Center" Margin="10,0"/>
			<TextBox Grid.Column="3" x:Name="StatusTextBlock" IsHitTestVisible="false" Background="Salmon" Text="{Binding CurrentStatus}" VerticalAlignment="Center" Width="Auto"/>

			<StackPanel x:Name="StatusBarKalibrering" Grid.Column="4" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="150,0,0,0">
				<Button Click="RomKalibrering_Click" Style="{StaticResource SquareRoundedButtonStyle}" Margin="5">
							<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Romkalibrering"/>
						</Button>
						<Button Style="{StaticResource SquareRoundedButtonStyle}" Margin="5">
							<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Høydekalibrering"/>
						</Button>
						<Button Click="MidtstillView_Sittende_Click" Style="{StaticResource SquareRoundedButtonStyle}" Margin="5">
							<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Midtstill sittende"/>
						</Button>
				<Button Click="MidstillView_Staaende_Click" Style="{StaticResource SquareRoundedButtonStyle}" Margin="5">
					<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Midstill Stående"/>
				</Button>
			</StackPanel>
			
			<!--Knapper (Pause, Avslutt og Nødstopp -->
			<StackPanel Grid.Column="5" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0">
				<!-- Return-knapp for spillvisning (skjules initialt) -->
				<Button x:Name="ReturnButton"  Click="ReturnButton_Click"
				Style="{StaticResource SquareRoundedButtonStyle}"
				HorizontalAlignment="Right" VerticalAlignment="Center" 
				Margin="0,0,5,0" Visibility="Collapsed">
			<StackPanel Orientation="Horizontal">
						<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Hjem"/>
					</StackPanel>
				</Button>
				<Button Style="{StaticResource SquareRoundedButtonStyle}" Click="PauseKnapp_Click" x:Name="PauseKnapp" Width="Auto">
					<StackPanel Orientation="Horizontal">
						<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Pause" Margin="0,0,10,0"/>
						<Image Source="/Bilder/pause_knapp.png" Height="18" Width="18" HorizontalAlignment="Right"/>
					</StackPanel>
				</Button>

				<Button Style="{StaticResource SquareRoundedButtonStyle}" x:Name="AvsluttKnapp" Width="Auto" Click="AvsluttKnapp_Click">
					<StackPanel Orientation="Horizontal">
						<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Avslutt" Margin="0,0,10,0"/>
						<Image Source="/Bilder/exit_knapp.png" Height="18" Width="18" HorizontalAlignment="Right"/>
					</StackPanel>
				</Button>

				<Button Style="{StaticResource SquareRoundedButtonStyle}" x:Name="NodStoppKnapp" Width="105" Click="Nodstopp_Click">
					<StackPanel Orientation="Horizontal">
						<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="Nødstopp" Margin="0,0,0,0"/>
						<Image Source="/Bilder/nodstopp_knapp.png" Height="18" Width="18"/>
					</StackPanel>
				</Button>

			</StackPanel>

		</Grid>

		<!-- HOVEDINNHOLD -->
		<Grid Grid.Row="2" x:Name="MainContentGrid">
			<Grid.ColumnDefinitions>
				<!-- Sidemeny: Bredden settes til 250 når den er synlig -->
				<ColumnDefinition x:Name="SideMenyColumn" Width="250"/>
				<!-- Hovedinnholdet -->
				<ColumnDefinition Width="*"/>
			</Grid.ColumnDefinitions>

			<!-- SIDEMENY -->
			<Border x:Name="SideMenu" Grid.Column="0" Background="White" BorderThickness="0,0,1,0" BorderBrush="#DDD">
				<Border.Effect>
					<DropShadowEffect BlurRadius="3" ShadowDepth="3" Direction="0" Color="Black" Opacity="0.9"/>
				</Border.Effect>
				<StackPanel Orientation="Vertical">
					<TextBox x:Name="SearchBox" Style="{StaticResource SearchBoxStyle}"
         Text="Søk etter spill..."
         Foreground="#888"
         GotFocus="SearchBox_GotFocus"
         LostFocus="SearchBox_LostFocus"
         TextChanged="SearchBox_TextChanged"/>
					<TextBlock Style="{DynamicResource SourceSansTextBlockStyle}" Text="Filtrer etter:" FontWeight="Bold" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxSteamSpill" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Steam spill" Margin="10,5,0,0" />
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxAndreSpill" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Andre Spill" Margin="10,5,0,0" />
					<Separator Margin="10,10,10,10"/>
					<TextBlock Style="{DynamicResource SourceSansTextBlockStyle}" Text="Kategorier" FontWeight="Bold" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxAction" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Action" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxEventyr" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Eventyr" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckFlerspiller" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Flerspiller" Margin="10,5,0,0"/>

					<CheckBox Click="UpdateFilters" x:Name="CheckBoxIndie" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Indie" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxLettbeint" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Lettbeint" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxMassivtFlerspill" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Massivt flerspill" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxRacing" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Racing" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxRollespill" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Rollespill" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxSimulering" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Simulering" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxSport" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Sport" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxStrategi" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Strategi" Margin="10,5,0,0"/>
					<Separator Margin="10,10,10,10"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxKunFavoritter" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Vis kun favoritter" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxNyligSpilt" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="Vis kun nylig spilt" Margin="10,5,0,0"/>
					<CheckBox Click="UpdateFilters" x:Name="CheckBoxVRSpill" Style="{DynamicResource RoundedCheckBoxWithSourceSansFontStyle}" Content="VR-spill" Margin="10,5,0,0" IsChecked="False" FontFamily="Source Sans 3"/>
					<Separator Margin="10,10,10,10"/>
					<Button Content="Skjul" Style="{DynamicResource SquareRoundedButtonStyle}"
        HorizontalAlignment="Center" VerticalAlignment="Center" Click="SkjulKnapp_Click"/>
				</StackPanel>
			</Border>

			<ItemsControl ItemsSource="{Binding ValgtKategori.Games}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<TextBlock Text="{Binding Title}"/>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>

			<!-- Spillvisning (dynamisk) -->
			<Grid x:Name="GameLibraryArea" HorizontalAlignment="Stretch" ClipToBounds="True" Grid.Column="1">
				<Grid.Effect>
					<DropShadowEffect BlurRadius="6"
									  ShadowDepth="5"
									  Direction="270"
									  Color="Black"
									  Opacity="0.9"/>
				</Grid.Effect>
				<ScrollViewer x:Name="GameLibraryScrollViewer" Visibility="Visible"
                      HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                      HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
					<ItemsControl x:Name="GamesItemsControl" ItemsSource="{Binding Games}" HorizontalContentAlignment="Stretch">
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<WrapPanel HorizontalAlignment="Stretch"/>
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<!-- Bruker den nye SquareRoundedButtonStyle her -->
								<Button Click="LaunchGameButton_Click" Style="{StaticResource SquareRoundedButtonStyle}" Margin="10">
									<StackPanel Width="300" Height="300">
										<Border BorderThickness="2" Background="Transparent"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="250">
											<Image Source="{Binding GameImage}" Stretch="Uniform"
                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
										</Border>
										<TextBlock Style="{StaticResource SourceSansTextBlockStyle}" Text="{Binding Title}" HorizontalAlignment="Center" 
                     TextTrimming="CharacterEllipsis" Margin="0,5,0,0" 
                     FontWeight="Bold" MaxWidth="180"/>
									</StackPanel>
								</Button>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>
			</Grid>
			<WindowsFormsHost x:Name="VRHost" Grid.Column="0" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
							  SizeChanged="VRHost_SizeChanged" Visibility="Collapsed">
				<wf:Panel x:Name="VRPanel"/>
			</WindowsFormsHost>
		</Grid>
		</Grid>
</Window>
