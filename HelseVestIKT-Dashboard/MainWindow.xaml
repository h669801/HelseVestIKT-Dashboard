<Window x:Class="HelseVestIKT_Dashboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wfi="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        Title="Helse Vest IKT" Height="800" Width="1500"
        Loaded="Window_Loaded">
    <Window.Resources>
        <!-- Style for toolbar buttons -->
        <Style x:Key="ToolBarButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="2"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#E0E0E0"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#C0C0C0"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Transparent button style for clickable game boxes -->
        <Style x:Key="TransparentButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
    </Window.Resources>

    <DockPanel>
        <!-- Toolbar Tray with sky blue background -->
        <ToolBarTray DockPanel.Dock="Top" Background="SkyBlue" HorizontalAlignment="Stretch">
            <ToolBar Height="80" Background="SkyBlue" HorizontalContentAlignment="Stretch">
                <Grid HorizontalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <!-- Left Group: Emoji buttons with battery percentages and calibration/status -->
                    <StackPanel Orientation="Horizontal" Grid.Column="0" VerticalAlignment="Center">
                        <!-- Emoji Groups -->
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Glasses group -->
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="0,0,20,0">
                                <Button Style="{StaticResource ToolBarButtonStyle}" Click="GlassesButton_Click">👓</Button>
                                <TextBlock Text="Batteri: 80%" FontSize="12" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <!-- Left hand group -->
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="0,0,20,0">
                                <Button Style="{StaticResource ToolBarButtonStyle}" Click="LeftHandButton_Click">🤚</Button>
                                <TextBlock Text="Batteri: 90%" FontSize="12" HorizontalAlignment="Center"/>
                            </StackPanel>
                            <!-- Right hand group -->
                            <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                                <Button Style="{StaticResource ToolBarButtonStyle}" Click="RightHandButton_Click">🖐️</Button>
                                <TextBlock Text="Batteri: 85%" FontSize="12" HorizontalAlignment="Center"/>
                            </StackPanel>
                        </StackPanel>
                        <!-- Calibration & Status Group -->
                        <StackPanel Orientation="Vertical" VerticalAlignment="Center" Margin="20,0,20,0">
                            <Button Style="{StaticResource ToolBarButtonStyle}" Click="KalibreringButton_Click">
                                Kalibrering
                            </Button>
                            <TextBlock x:Name="StatusTextBlock" Text="Tilkoblet" FontSize="12" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </StackPanel>
                    <!-- Center Group: Display "Helse Vest IKT" centered -->
                    <TextBlock Grid.Column="1" Text="Helse Vest IKT"
                     FontSize="20" FontWeight="Bold"
                     VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    <!-- Right Group: Clock, Fullscreen, Exit, Volume slider, Return and Reset buttons -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Clock -->
                        <TextBlock Text="{Binding CurrentTime}"
                       VerticalAlignment="Center"
                       FontSize="16"
                       HorizontalAlignment="Right"
                       Margin="20,0,20,0"
                       Foreground="Black"/>
                        <!-- Fullscreen button -->
                        <Button Style="{StaticResource ToolBarButtonStyle}" Click="FullScreenButton_Click" Margin="20,0,20,0">
                            ⛶
                        </Button>
                        <!-- Exit button -->
                        <Button Style="{StaticResource ToolBarButtonStyle}" Click="ExitButton_Click" Margin="20,0,20,0">
                            ❌
                        </Button>
                        <!-- Volume slider with status -->
                        <Grid Margin="20,0,20,0">
                            <Slider x:Name="VolumeSlider"
                      Width="100"
                      Minimum="0"
                      Maximum="100"
                      Value="50"
                      Margin="0,0,10,0"
                      ToolTip="Juster volum"/>
                            <TextBlock x:Name="VolumeStatusTextBlock"
                         Text="50%"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Bottom"
                         Margin="0,20,0,0"
                         Foreground="Black"
                         Background="LightGray"
                         Padding="2"
                         Visibility="Collapsed"/>
                        </Grid>
                        <!-- Return button (initially hidden) -->
                        <Button x:Name="ReturnButton" Style="{StaticResource ToolBarButtonStyle}" 
                    Click="ReturnButton_Click" Visibility="Collapsed" Margin="20,0,20,0">
                            tilbake til spillbibliotek
                        </Button>
                        <!-- Reset button -->
                        <Button x:Name="ResetButton" Style="{StaticResource ToolBarButtonStyle}" 
                    Click="ResetButton_Click" Visibility="Visible" Margin="20,0,20,0">
                            Reset
                        </Button>
                    </StackPanel>
                </Grid>
            </ToolBar>
        </ToolBarTray>

        <!-- Header row with Filter/Sorter text, Alle spill header, and search bar -->
        <Grid DockPanel.Dock="Top" Height="40" Margin="0,10" x:Name="HeaderGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <!-- Left: Filter/Sorter text -->
            <TextBlock Grid.Column="0" Text="Filter/Sorter"
                 FontSize="16" FontWeight="Bold"
                 VerticalAlignment="Center" Margin="10,0"/>
            <!-- Center: Alle spill header -->
            <TextBlock Grid.Column="1" Text="Alle spill"
                 FontSize="24" FontWeight="Bold"
                 VerticalAlignment="Center" HorizontalAlignment="Center"/>
            <!-- Right: Search bar -->
            <TextBox Grid.Column="2" Text="Søk etter spill..."
               x:Name="SearchBox"
               VerticalAlignment="Center"
               Margin="10,0,10,0" Height="24" Width="150"
               ToolTip="Search games"
               GotFocus="SearchBox_GotFocus"
               LostFocus="SearchBox_LostFocus"/>
        </Grid>

        <!-- Game library area: Contains both the game library and the VR spectator view -->
        <Grid x:Name="GameLibraryArea">
            <!-- Original game library -->
            <ScrollViewer x:Name="GameLibraryScrollViewer" Visibility="Visible">
                <UniformGrid Columns="4" Margin="20">
                    <!-- Spill 1: Clickable game box for Spill 1 -->
                    <Button Click="LaunchGameButton_Click" Style="{StaticResource TransparentButtonStyle}" 
                  Width="150" Height="210" Margin="10">
                        <StackPanel>
                            <Border BorderBrush="Gray" BorderThickness="2" Width="150" Height="150">
                                <Image x:Name="SteamGameImage" Stretch="UniformToFill" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                            </Border>
                            <TextBlock Text="Spill 1" HorizontalAlignment="Center" Margin="0,5,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>
                    <!-- Spill 2 -->
                    <Button Style="{StaticResource TransparentButtonStyle}" 
                  Width="150" Height="210" Margin="10">
                        <StackPanel>
                            <Border BorderBrush="Gray" BorderThickness="2" Width="150" Height="150">
                            </Border>
                            <TextBlock Text="Spill 2" HorizontalAlignment="Center" Margin="0,5,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>
                    <!-- Spill 3 -->
                    <Button Style="{StaticResource TransparentButtonStyle}" 
                  Width="150" Height="210" Margin="10">
                        <StackPanel>
                            <Border BorderBrush="Gray" BorderThickness="2" Width="150" Height="150">
                            </Border>
                            <TextBlock Text="Spill 3" HorizontalAlignment="Center" Margin="0,5,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>
                    <!-- Spill 4 -->
                    <Button Style="{StaticResource TransparentButtonStyle}" 
                  Width="150" Height="210" Margin="10">
                        <StackPanel>
                            <Border BorderBrush="Gray" BorderThickness="2" Width="150" Height="150">
                            </Border>
                            <TextBlock Text="Spill 4" HorizontalAlignment="Center" Margin="0,5,0,0" FontWeight="Bold"/>
                        </StackPanel>
                    </Button>
                </UniformGrid>
            </ScrollViewer>
            <!-- Example Image control for Steam game image -->

            <!-- VR spectator view embedded via WindowsFormsHost; initially hidden -->
            <wfi:WindowsFormsHost x:Name="VRHost" Visibility="Collapsed">
                <wf:Panel x:Name="HostPanel" />
            </wfi:WindowsFormsHost>
        </Grid>

        <!-- Log-knapp plassert i nedre høyre hjørne -->
        <Button x:Name="LogButton"
            Content="Error log"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Margin="20"
            Click="LogButton_Click"
            Style="{StaticResource ToolBarButtonStyle}"/>
    </DockPanel>
</Window>
